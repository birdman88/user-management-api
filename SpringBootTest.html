<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>SpringBoot &lpar;Java&rpar; Basic Test</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="springboot-java-basic-test">SpringBoot (Java) Basic Test</h1>
<h2 id="base-requirements">Base Requirements</h2>
<p>Create a SpringBoot project using spring-initializer, following these requirements:</p>
<ul>
<li>Use Java 25 and SpringBoot 3.5.x</li>
<li>Gradle for build system</li>
<li>Use Spring Data JPA with H2 DB for data persistence</li>
<li>Implement bean validations for all API request</li>
<li>Implement custom error handler for invalid API request</li>
<li>Write unit tests for controller, service, and any native / JPQL query in respository</li>
<li>Code coverage must be higher than 80%</li>
<li>Clean code with trivial amount IDE and compiler warning</li>
<li>Project must pass compilation and able to start properly</li>
<li>You are given 2x 24 hour time to complete the test</li>
<li>Push the code to your personal github or gitlab repository</li>
<li>Any commit that is pushed after the cutoff period will be considered invalid</li>
<li>Attach a postman collection with your test data along the submission</li>
</ul>
<h2 id="domain-classes">Domain Classes</h2>
<h3 id="1-user">1. User</h3>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>numeric</td>
<td>primary key, auto increment</td>
</tr>
<tr>
<td>ssn</td>
<td>string</td>
<td>non nullable, unique numeric string, must be 16 digits, if less than 16 pad the leading with zero</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>not nullable, min 3 character, cannot contain special character, max 100 character</td>
</tr>
<tr>
<td>middle_name</td>
<td>string</td>
<td>nullable, same constraints as first_name</td>
</tr>
<tr>
<td>family_name</td>
<td>string</td>
<td>same constraints as first_name</td>
</tr>
<tr>
<td>birth_date</td>
<td>date</td>
<td>must be valid date, cannot be older than 100 years</td>
</tr>
<tr>
<td>created_time</td>
<td>date time</td>
<td>auto timestamp for record creation</td>
</tr>
<tr>
<td>updated_time</td>
<td>date time</td>
<td>auto timestamp for record updated</td>
</tr>
<tr>
<td>created_by</td>
<td>string</td>
<td>not nullable, max 100 characters, default to 'SYSTEM'</td>
</tr>
<tr>
<td>updated_by</td>
<td>string</td>
<td>not nullable, max 100 characters, default to 'SYSTEM'</td>
</tr>
<tr>
<td>is_active</td>
<td>boolean</td>
<td>not nullable, default to true</td>
</tr>
<tr>
<td>deleted_time</td>
<td>date time</td>
<td>nullable, only filled when soft-delete is performed, set to null when user is restored</td>
</tr>
</tbody>
</table>
<h3 id="2-user-setting">2. User Setting</h3>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>numeric</td>
<td>primary key, auto increment</td>
</tr>
<tr>
<td>key</td>
<td>string</td>
<td>non nullable, min 3, max 100</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>not nullable, min 3, max 100</td>
</tr>
<tr>
<td>user_id</td>
<td>numeric</td>
<td>non nullable, fk to user record</td>
</tr>
</tbody>
</table>
<h3 id="21-user-setting-key-lov">2.1. User Setting Key LOV</h3>
<table>
<thead>
<tr>
<th>Record</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>biometric_login</td>
<td>string</td>
<td>true or false, default to false</td>
</tr>
<tr>
<td>push_notification</td>
<td>string</td>
<td>true or false, default to false</td>
</tr>
<tr>
<td>sms_notification</td>
<td>string</td>
<td>true or false, default to false</td>
</tr>
<tr>
<td>show_onboarding</td>
<td>string</td>
<td>true or false, default to false</td>
</tr>
<tr>
<td>widget_order</td>
<td>string</td>
<td>must be numeric string 1 to 5 separated by comma, default to 1,2,3,4,5</td>
</tr>
</tbody>
</table>
<h2 id="data-serialization">Data Serialization</h2>
<ul>
<li>All request and response must be in <strong>snake_case</strong> format</li>
<li>Date must be serialized to ISO8601 format, time section in UTC</li>
<li><code>null</code> value must be skipped from serialization</li>
<li>Example for user data</li>
</ul>
<pre><code>{
    &quot;id&quot;: 1,
    &quot;ssn&quot;: &quot;0000000000002945&quot;,
    &quot;first_name&quot;: &quot;Jon&quot;,
    &quot;last_name&quot;: &quot;Snow&quot;,
    &quot;birth_date&quot;: &quot;1990-01-02&quot;,
    &quot;created_time&quot;: &quot;2019-10-01T00:28:32Z&quot;,
    &quot;updated_time&quot;: &quot;2020-03-10T05:53:19Z&quot;,
    &quot;created_by&quot;: &quot;SYSTEM&quot;,
    &quot;updated_by&quot;: &quot;SYSTEM&quot;,
    &quot;is_active&quot;: true
}
</code></pre>
<h2 id="error-response">Error Response</h2>
<ul>
<li>For data not found (including soft-deleted data) API shall return HTTP 404</li>
<li>For conflicting data (SSN not unique, etc) API shall return HTTP 409</li>
<li>For invalid request API shall return HTTP 422</li>
<li>For fatal error API shall return HTTP 500</li>
<li>Error response format</li>
</ul>
<pre><code>{
    &quot;status&quot;: &quot;string_of_http_status&quot;
    &quot;code&quot;: the_error_code,
    &quot;message&quot;: [
        &quot;error_message&quot;,
        &quot;more_error_message&quot;
    ]
}
</code></pre>
<ul>
<li>Sample error response</li>
</ul>
<pre><code>{
    &quot;status&quot;: &quot;BAD_REQUEST&quot;
    &quot;code&quot;: 30002,
    &quot;message&quot;: [
        &quot;Invalid value for field ssn, rejected value: abc&quot;,
        &quot;Invalid value for field first_name, rejected value: 123&quot;,
        &quot;Invalid value for field family_name, rejected value: null&quot;
    ]
}
</code></pre>
<ul>
<li>Error response mapping</li>
</ul>
<table>
<thead>
<tr>
<th>Status</th>
<th>Code</th>
<th>Message</th>
</tr>
</thead>
<tbody>
<tr>
<td>404</td>
<td>30000</td>
<td>Cannot find resource with id {the_id}</td>
</tr>
<tr>
<td>409</td>
<td>30001</td>
<td>Record with unique value {the_value} already exists in the system</td>
</tr>
<tr>
<td>422</td>
<td>30002</td>
<td>Invalid value for field {field_name}, rejected value: {the_value}</td>
</tr>
<tr>
<td>500</td>
<td>80000</td>
<td>System error, we're unable to process your request at the moment</td>
</tr>
</tbody>
</table>
<h2 id="api-specifications">API Specifications</h2>
<h3 id="1-get-v1users">1. GET /v1/users</h3>
<ul>
<li>Retrieve active user data based on pagination request</li>
<li>Pagination query parameters</li>
</ul>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>max_records</td>
<td>numeric</td>
<td>mandatory, default to 5</td>
</tr>
<tr>
<td>offset</td>
<td>numeric</td>
<td>mandatory, default to 0</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>Sample request
<code>GET https://myhost/users?max_records=10&amp;offset=2</code></p>
</li>
<li>
<p>Sample response</p>
</li>
</ul>
<pre><code>{
    &quot;user_data&quot;: [
        {
            &quot;id&quot;: 1,
            &quot;ssn&quot;: &quot;0000000000002945&quot;,
            &quot;first_name&quot;: &quot;Jon&quot;,
            &quot;last_name&quot;: &quot;Snow&quot;,
            &quot;birth_date&quot;: &quot;1990-01-02&quot;,
            &quot;created_time&quot;: &quot;2019-10-01T00:28:32Z&quot;,
            &quot;updated_time&quot;: &quot;2020-03-10T05:53:19Z&quot;,
            &quot;created_by&quot;: &quot;SYSTEM&quot;,
            &quot;updated_by&quot;: &quot;SYSTEM&quot;,
            &quot;is_active&quot;: true
        },
        ....
        // serialized user data goes here
    ],
    &quot;max_records&quot;: 10,
    &quot;offset&quot;: 2
}
</code></pre>
<h3 id="2-get-v1usersid">2. GET /v1/users/{id}</h3>
<ul>
<li>Retrive active user data based on user ID, along with the user preferences</li>
<li>Sample request
<code>GET https://myhost/users/1</code></li>
<li>Sample response</li>
</ul>
<pre><code>{
    &quot;user_data&quot;: {
        &quot;id&quot;: 1,
        &quot;ssn&quot;: &quot;0000000000002945&quot;,
        &quot;first_name&quot;: &quot;Jon&quot;,
        &quot;last_name&quot;: &quot;Snow&quot;,
        &quot;birth_date&quot;: &quot;1990-01-02&quot;,
        &quot;created_time&quot;: &quot;2019-10-01T00:28:32Z&quot;,
        &quot;updated_time&quot;: &quot;2020-03-10T05:53:19Z&quot;,
        &quot;created_by&quot;: &quot;SYSTEM&quot;,
        &quot;updated_by&quot;: &quot;SYSTEM&quot;,
        &quot;is_active&quot;: true
    },
    &quot;user_settings&quot;: [
        {
            &quot;biometric_login&quot;: &quot;false&quot;
        },
        {
            &quot;push_notification&quot;: true
        },
        {
            &quot;sms_notification&quot;: false
        },
        {
            &quot;show_onboarding&quot;: false
        },
        {
            &quot;widget_order&quot;: &quot;1,2,3,4,5&quot;
        }
    ]
}
</code></pre>
<h3 id="3-post-v1users">3. POST /v1/users</h3>
<ul>
<li>Create a new user record from request</li>
<li>Create a default user settings for the new user</li>
<li>Respond with HTTP status 201 if success</li>
<li>Sample request</li>
</ul>
<pre><code>{
    &quot;ssn&quot;: &quot;0000000000002945&quot;,
    &quot;first_name&quot;: &quot;Jon&quot;,
    &quot;last_name&quot;: &quot;Snow&quot;,
    &quot;birth_date&quot;: &quot;1990-01-02&quot;
}
</code></pre>
<ul>
<li>Sample response</li>
</ul>
<pre><code>{
    &quot;user_data&quot;: {
        &quot;id&quot;: 1,
        &quot;ssn&quot;: &quot;0000000000002945&quot;,
        &quot;first_name&quot;: &quot;Jon&quot;,
        &quot;last_name&quot;: &quot;Snow&quot;,
        &quot;birth_date&quot;: &quot;1990-01-02&quot;,
        &quot;created_time&quot;: &quot;2022-12-07T03:25:49Z&quot;,
        &quot;updated_time&quot;: &quot;2022-12-07T03:25:49Z&quot;,
        &quot;created_by&quot;: &quot;SYSTEM&quot;,
        &quot;updated_by&quot;: &quot;SYSTEM&quot;,
        &quot;is_active&quot;: true
    },
    &quot;user_settings&quot;: [
        {
            &quot;biometric_login&quot;: &quot;false&quot;
        },
        {
            &quot;push_notification&quot;: &quot;false&quot;
        },
        {
            &quot;sms_notification&quot;: &quot;false&quot;
        },
        {
            &quot;show_onboarding&quot;: &quot;false&quot;
        },
        {
            &quot;widget_order&quot;: &quot;1,2,3,4,5&quot;
        }
    ]
}
</code></pre>
<h3 id="4-put-v1usersid">4. PUT /v1/users/{id}</h3>
<ul>
<li>Update active user data based for the given id</li>
<li>Only first_name, middle_name, last_name, and dob can be updated</li>
<li>Sample request</li>
</ul>
<pre><code>{
    &quot;ssn&quot;: &quot;0000000000002945&quot;,
    &quot;first_name&quot;: &quot;Foo&quot;,
    &quot;last_name&quot;: &quot;Bar&quot;,
    &quot;birth_date&quot;: &quot;1980-01-01&quot;
}
</code></pre>
<ul>
<li>Sample response</li>
</ul>
<pre><code>{
    &quot;user_data&quot;: {
        &quot;id&quot;: 1,
        &quot;ssn&quot;: &quot;0000000000002945&quot;,
        &quot;first_name&quot;: &quot;Foo&quot;,
        &quot;last_name&quot;: &quot;Bar&quot;,
        &quot;birth_date&quot;: &quot;1980-01-02&quot;,
        &quot;created_time&quot;: &quot;2019-10-01T00:28:32Z&quot;,
        &quot;updated_time&quot;: &quot;2022-12-07T03:25:49Z&quot;,
        &quot;created_by&quot;: &quot;SYSTEM&quot;,
        &quot;updated_by&quot;: &quot;SYSTEM&quot;,
        &quot;is_active&quot;: true
    },
    &quot;user_settings&quot;: [
        {
            &quot;biometric_login&quot;: &quot;false&quot;
        },
        {
            &quot;push_notification&quot;: &quot;false&quot;
        },
        {
            &quot;sms_notification&quot;: &quot;false&quot;
        },
        {
            &quot;show_onboarding&quot;: &quot;false&quot;
        },
        {
            &quot;widget_order&quot;: &quot;1,2,3,4,5&quot;
        }
    ]
}
</code></pre>
<h3 id="5-put-v1usersidsettings">5. PUT /v1/users/{id}/settings</h3>
<ul>
<li>Update active user settings based for the given user id</li>
<li>Validate all settings input</li>
<li>Sample request <code>PUT https://myhost/users/1/settings</code></li>
</ul>
<pre><code>[
    {
        &quot;biometric_login&quot;: &quot;false&quot;
    },
    {
        &quot;push_notification&quot;: &quot;true&quot;
    },
    {
        &quot;sms_notification&quot;: &quot;true&quot;
    },
    {
        &quot;show_onboarding&quot;: &quot;false&quot;
    },
    {
        &quot;widget_order&quot;: &quot;5,2,1,3,5&quot;
    }
]
</code></pre>
<ul>
<li>Sample response</li>
</ul>
<pre><code>{
    &quot;user_data&quot;: {
        &quot;id&quot;: 1,
        &quot;ssn&quot;: &quot;0000000000002945&quot;,
        &quot;first_name&quot;: &quot;Foo&quot;,
        &quot;last_name&quot;: &quot;Bar&quot;,
        &quot;birth_date&quot;: &quot;1980-01-02&quot;,
        &quot;created_time&quot;: &quot;2019-10-01T00:28:32Z&quot;,
        &quot;updated_time&quot;: &quot;2022-12-07T03:25:49Z&quot;,
        &quot;created_by&quot;: &quot;SYSTEM&quot;,
        &quot;updated_by&quot;: &quot;SYSTEM&quot;,
        &quot;is_active&quot;: true
    },
    &quot;user_settings&quot;: [
        {
            &quot;biometric_login&quot;: &quot;false&quot;
        },
        {
            &quot;push_notification&quot;: &quot;true&quot;
        },
        {
            &quot;sms_notification&quot;: &quot;true&quot;
        },
        {
            &quot;show_onboarding&quot;: &quot;false&quot;
        },
        {
            &quot;widget_order&quot;: &quot;5,2,1,3,5&quot;
        }
    ]
}
</code></pre>
<h3 id="5-del-v1usersid">5. DEL /v1/users/{id}</h3>
<ul>
<li>Perform a soft-delete for a given user id</li>
<li>Set <code>is_active</code> to <code>false</code></li>
<li>Set the <code>deleted_time</code></li>
<li>Return HTTP 204 with no respone body</li>
</ul>
<h3 id="6-put-v1usersidrefresh">6. PUT /v1/users/{id}/refresh</h3>
<ul>
<li>Reactivate previously soft-deleted user</li>
<li>Set <code>is_active</code> to <code>true</code></li>
<li>Clear out the value of <code>deleted_time</code></li>
<li>Return with same response as <code>GET /v1/users/{id}</code></li>
<li>Sample response</li>
</ul>
<pre><code>{
    &quot;user_data&quot;: {
        &quot;id&quot;: 1,
        &quot;ssn&quot;: &quot;0000000000002945&quot;,
        &quot;first_name&quot;: &quot;Jon&quot;,
        &quot;last_name&quot;: &quot;Snow&quot;,
        &quot;birth_date&quot;: &quot;1990-01-02&quot;,
        &quot;created_time&quot;: &quot;2019-10-01T00:28:32Z&quot;,
        &quot;updated_time&quot;: &quot;2020-03-10T05:53:19Z&quot;,
        &quot;created_by&quot;: &quot;SYSTEM&quot;,
        &quot;updated_by&quot;: &quot;SYSTEM&quot;,
        &quot;is_active&quot;: true
    },
    &quot;user_settings&quot;: [
        {
            &quot;biometric_login&quot;: &quot;false&quot;
        },
        {
            &quot;push_notification&quot;: true
        },
        {
            &quot;sms_notification&quot;: false
        },
        {
            &quot;show_onboarding&quot;: false
        },
        {
            &quot;widget_order&quot;: &quot;1,2,3,4,5&quot;
        }
    ]
}
</code></pre>

            
            
        </body>
        </html>